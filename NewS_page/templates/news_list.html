{% for i in craw %}
<div class="card-list">
    <a href=""> <!-- 클릭 시 링크 설정 -->
		<div class="card">
			{% if i.img == "#" %}
			<!-- 카드 헤더 -->
				<div class="card-header">
					<p>이미지 없음 대체</p>
    		{% else %}
					<img src="{{ i.img }}" style="width: 450px; height: 300px;">
				</div>
			{% endif %}
			<!--카드 바디 -->
			<div class="card-body">
				<!--카드 바디 헤더 -->
				<div class="card-body-header">
					<h3 class="card-header">{{ i.title }}</h3>
					     <div id="loading-screen-{{ forloop.counter }}">
							<p>Loading... <img src="https://t1.daumcdn.net/cfile/tistory/184F8A4E4E55932B06" width="15" height="15"></p>
						 </div>
					<!-- 모델 결과를 표시할 부분 -->
					   <div id="result-section-{{ forloop.counter }}" style="display: none;">
							<p>{{ i.summarize }}</p>
					   </div>
				</div>
				<p class="card-body-description">
					안녕하세요!
					같이 퇴근하고싶은 사람 구해요!
				</p>
				<!--카드 바디 본문 -->
				<!--카드 바디 푸터 -->
				<div class="card-body-footer">
					<hr style="margin-bottom: 2px; opacity: 0.5; border-color: #EF5A31">
				 	<a href="{{ i.src }}">본문보기</a>
	<!--										<i class="icon icon-view_count"></i>조회 38회-->
	<!--										<i class="icon icon-comments_count"></i>댓글 4개-->
	<!--										<i class="reg_date"> 2018/04/12 </i>-->
				</div>
			</div>
		</div>
	</a>
</div>
{% endfor %}
<style>
    .container {
        text-align: center; /* 부모 요소 안에서 텍스트 정렬을 가운데로 설정합니다. */
    }
    .main-header-logo {
        display: inline-block; /* 블록 요소로 설정하여 가운데 정렬을 용이하게 합니다. */
    }
    .main-header-logo img {
        display: block; /* 이미지를 블록 요소로 설정하여 가운데 정렬을 용이하게 합니다. */
        margin: 0 auto; /* 좌우 여백을 자동으로 설정하여 가운데 정렬합니다. */
    }
    @media(min-width: 600px){ /* 사이트 창 크기에 따라 보여지는 카드 리스트 갯수 변형 */

	.card-list {
	display: flex;
	justify-content: center;

    }
    .card-item {
        width: 50%; // 카드 2단 배치
        padding: 0 1rem; // 카드 사이 간격
    }
	}
	@media(min-width: 1200px){
		.card-item {
			width: 33.33333%; // 카드 3단 배치
		}
	}
	.card {
	height: 600px;
	width: 450px;
	border-radius: 15px;
	display: inline-block;
	margin-top: 30px;
	margin-left: 15px;
	margin-right: 15px;
	margin-bottom: 30px;
	position: relative;
	box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
	overflow: hidden;
	}

	.card-header {
		-webkit-transition: 0.5s; /*사파리 & 크롬*/
	-moz-transition: 0.5s;/*파이어폭스*/
	-ms-transition: 0.5s;	/*인터넷 익스플로러*/
	-o-transition: 0.5s;/*오페라*/
	transition: 0.5s;
		width: 100%;
		height: 310px;
		border-radius: 15px 15px 0 0;
		background-image: url("images/korea.jpeg");
		background-size: 100% 280px;
		background-repeat: no-repeat;
	}

	.card:hover .card-header{
		opacity: 0;
		height: 0px;
	}

	.card-header-is_closed{
	background-color: #EF5A31 ;
	color: #FFF ;
	font-weight: bold ;
	text-align: center ;
	float: right;
	margin: 15px 15px 0 0;
	border-radius: 50%;
	font-weight: bold;
	padding: 10px 10px;
	line-height: 20px;
	}

	h1 {
	font-size: 22px;
	font-weight: bold;
	}

	.card-body {
	}

	.card-body-header{
		line-height: 25px;
		margin: 10px 20px 0px 20px;
	}

	.card-body-description{
		opacity: 0;
		color: #757B82;
		line-height: 20px;
		-webkit-transition: .2s ease-in-out; /*사파리&크롬*/
		-moz-transition: .2s ease-in-out; /*파이어폭스*/
		-ms-transition: .2s ease-in-out; /*익스플로러*/
		-o-transition: .2s ease-in-out; /*오페라*/
		transition : .2s ease-in-out;
		overflow: hidden;
		height: 200px;
		margin: 5px 20px;
	}

	.card:hover .card-body-description {
		opacity: 1;
		-webkit-transition: .5s ease-in-out;
		-moz-transition: .5s ease-in-out;
		-ms-transition: .5s ease-in-out;
		-o-transition: .5s ease-in-out;
		transition : .5s ease-in-out;
		overflow: scroll;
	}

	.card-body-hashtag {
		color: #2478FF;
		font-style: italic;
	}

	.card-body-footer {
		position: absolute;
		margin-top: 15px;
		margin-left: 15px;
		margin-bottom: 6px;
		bottom: 0;
		width: 314px;
		font-size: 14px;
		color: #9FA5A8;
		padding: 0 15px;
	}

	.icon {
		display: inline-block;
		vertical-align: middle;
		margin-right: 2px;
	}

	.icon-view_count {
		width: 25px;
		height: 17px;
		background: url("images/eye.jpg") no-repeat;
	}

	.icon-comments_count {
		margin-left: 5px;
		width: 25px;
		height: 17px;
		background: url("images/comment.jpg") no-repeat;
	}

	.reg_date {
		float: right;
	}

</style>
<script>
	async function fetchData() {
		try {
			// 비동기적으로 서버에서 데이터 가져오기
			const response = await fetch('/your-model-endpoint/', {
				method: 'GET',
				credentials: 'include',  // CSRF 토큰을 함께 전송
			});
			const data = await response.json();

			// 여러 기사에 대한 결과를 표시
			data.result.forEach((summarize, index) => {
				document.getElementById(`loading-screen-${index + 1}`).style.display = "none";
				document.getElementById(`result-section-${index + 1}`).style.display = "block";
				document.getElementById(`result-section-${index + 1}`).innerHTML = `<p>${summarize}</p>`;
			});

			// 확인용으로 모델 결과를 콘솔에 출력
			console.log('Model result:', data.result);
		} catch (error) {
			console.error('Error fetching data:', error);
		}
		}

		// fetchData 함수를 바로 호출하여 페이지 로딩시 실행
	fetchData();
</script>